<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>지니아튜터</title>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="../inc/css/font.css">
  <link rel="stylesheet" href="../inc/css/reset.css">
  <link rel="stylesheet" href="../inc/css/common_front.css">
  <link rel="stylesheet" href="../inc/css/sub.css">
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"
  integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.8.0/dist/chart.min.js"></script>
  <script src="../inc/js/common.js"></script>
</head>
<body>
  <div id="wrap">
    <div class="dim"></div>
    <div class="pop-wrap full-type report-pop" style="display:block;">
      <div class="pop-inner">
        <div class="pop-header">
          <span>리포트</span>
          <button type="button" class="pop-close"></button>
        </div>
        <div class="pop-content">
          <div class="inner">
            <div class="report-view-wrap stu-view">
              <div class="view-cnt-wrap">
                <div class="report-top">
                  <div class="unit-tit-wrap">
                    <div class="tit">
                      <span class="txt"><em>수학 6-1</em> 4. 약분과 통분 형성평가 결과확인</span>
                    </div>
                    <div class="btn-wrap">
                      <button type="button" class="web-cnt btn-print"></button>
                    </div>
                  </div>
                  <div class="web-cnt user-wrap">
                    <span class="info">천재초  ·  6학년 1반  ·  수학  ·  <em>김천재</em></span>
                    <span class="badge">학생용</span>
                  </div>
                </div>
                <div class="report-cnt">
                  <span class="title">종합</span>
                  <div class="justify-box">
                    <div class="box w46 bd-n h300">
                      <div class="scroll-inner type02">
                        <div class="table-wrap type01">
                          <table>
                            <colgroup>
                              <col width="20%;">
                              <col width="*">
                            </colgroup>
                            <tbody>
                              <tr>
                                <th>단원</th>
                                <td class="a-left">1. 곱셈</td>
                              </tr>
                              <tr>
                                <th>학습주제</th>
                                <td class="a-left">[3] (세 자리 수)x(한 자리 수)를 계산해볼까요</td>
                              </tr>
                              <tr>
                                <th>맞은 개수</th>
                                <td class="a-left">3 / 5 문제</td>
                              </tr>
                              <tr>
                                <th>학습 일시</th>
                                <td class="a-left">22.09.13  PM 14:30~14:40</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                    <div class="box w26 h300">
                      <div class="chart-wrap">
                        <canvas id="achieveChart"></canvas>
                      </div>
                    </div>
                    <div class="box w26 h300">
                      <div class="time-box">
                        <p>8분</p>
                        <em>학습시간</em>
                      </div>
                    </div>
                  </div>
                  <p class="sub-title">문제별 정보</p>
                  <div class="box bd-n w340">            
                    <div class="table-wrap type01 style01">
                      <div class="scroll-inner type02">
                        <table>
                          <colgroup>
                            <col width="20%;">
                            <col>
                            <col>
                            <col>
                            <col>
                            <col>
                          </colgroup>
                          <thead>
                            <tr>
                              <td>문제</td>
                              <td>Q1</td>
                              <td>Q2</td>
                              <td>Q3</td>
                              <td>Q4</td>
                              <td>Q5</td>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>수준</td>
                              <td>중</td>
                              <td>하</td>
                              <td>상</td>
                              <td>상</td>
                              <td>중</td>
                            </tr>
                            <tr>
                              <td>정답</td>
                              <td>5</td>
                              <td>4</td>
                              <td>3</td>
                              <td>3</td>
                              <td>4</td>
                            </tr>
                            <tr>
                              <td>응답</td>
                              <td>5</td>
                              <td>3</td>
                              <td>3</td>
                              <td>3</td>
                              <td>3</td>
                            </tr>
                            <tr>
                              <td>결과</td>
                              <td>O</td>
                              <td>X</td>
                              <td>O</td>
                              <td>O</td>
                              <td>X</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                  <span class="title mt100">오답노트</span>
                  <div class="box w650">
                    <div class="table-wrap type01 style01">
                      <div class="scroll-inner type02">
                        <div class="tbl-report type02">
                          <div class="col num">
                            <div class="th">번호</div>
                            <div class="td answer">1</div>
                          </div>
                          <div class="col-wrap">
                            <div class="col que">
                              <div class="th">문제</div>
                              <div class="td"><img src="../images/sub/sample_que_03.png" alt=""></div>
                            </div>
                            <div class="col que">
                              <div class="th">해설</div>
                              <div class="td">439X2=878</div>
                            </div>
                          </div>
                        </div>
                        <div class="tbl-report type02">
                          <div class="col num">
                            <div class="th">번호</div>
                            <div class="td wrong">2</div><!-- 230522 수정 -->
                          </div>
                          <div class="col-wrap">
                            <div class="col que">
                              <div class="th">문제</div>
                              <div class="td"><img src="../images/sub/sample_que_03.png" alt=""></div>
                            </div>
                            <div class="col que">
                              <div class="th">해설</div>
                              <div class="td">439X2=878</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
<script>
  $(function () {    
    // 학업성취율 차트
    function achieveChartRender(){
      let doughnutCanvas = document.getElementById("achieveChart").getContext('2d');
      let gradient = doughnutCanvas.createLinearGradient(0, 0, 150, 0);
      gradient.addColorStop(0, 'rgba(32, 139, 255, 1)');
      gradient.addColorStop(1, 'rgba(125, 94, 255, 1)');
      let value = 75;
      let data = {
        labels: ['학급성취율'],
        datasets: [
          {
            label: 'dataSet',
            data: [value, 100 - value],
            backgroundColor: [ gradient , '#f4f4f4']
          }
        ]
      }
      new Chart(doughnutCanvas, {
        type: 'doughnut',
        data: data,
        options:{
          responsive: true,
          rotation: -90,
          circumference: 180,
          cutout: '75%',
          plugins: {
            legend: {
              display: false,
            },
            tooltip: {
              enabled: false,
            },
          },
          hover: {
            mode: null
          },
        },
        plugins: [{
          afterDraw: function(chart) {
            let width = chart.width
            let height = chart.height
            let ctx = chart.ctx;
            console.log(ctx);

            ctx.restore();

            var text = chart.config.data.datasets[0].data[0] + "%",
              fontSize = 26;
            ctx.font = "bold " + fontSize + "px noto Sans KR";
            ctx.fillStyle = "#108eff";
            textX = Math.round((width - ctx.measureText(text).width) / 2);
            textY = height / 1.7;

            ctx.fillText(text, textX, textY);

            var text2 = chart.config.data.labels[0],
              fontSize2 = 19;
            ctx.font = "bold " + fontSize2 + "px noto Sans KR";
            ctx.fillStyle = "#000";
            textX = Math.round((width - ctx.measureText(text2).width) / 2);
            textY = height / 1.4;

            ctx.fillText(text2, textX, textY);

            ctx.save();
          }
        }]
      });
    };

    $(document).ready(function(){
      achieveChartRender();
    });

  });
</script>
</html>
  